---
title: "Next.js"
sidebar_label: "Next.js App Router"
sidebar_position: 200
description: "Next.js 앱에서 Convex가 작동하는 방법"
---

import Config from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir-14/app/_ConvexClientProviderAuth.tsx";

[Next.js](https://nextjs.org/)는 React 웹 개발 프레임워크입니다. Convex와 함께 사용할 때 Next.js는 다음을 제공합니다:

- 파일 시스템 기반 라우팅
- 개발 시 빠른 새로고침
- 폰트 및 이미지 최적화

그 외 더 많은 것들!

이 페이지는 Next.js의 App Router 변형을 다룹니다. 또는 이 페이지의
[Pages Router](/client/nextjs/pages-router/index.mdx) 버전을 참조하세요.

## 시작하기

[Next.js 빠른 시작](/quickstart/nextjs.mdx)을 따라 새로운 또는 기존 Next.js 프로젝트에 Convex를 추가하세요.

## 클라이언트 코드에서 Convex 함수 호출하기

클라이언트 코드에서 데이터베이스의 데이터를 가져오고 편집하려면
[Convex React 라이브러리](/client/react)의 훅을 사용하세요.

<CardLink
  className="convex-hero-card"
  item={{
    href: "/client/react",
    label: "Convex React 라이브러리 문서",
  }}
/>

## 서버 렌더링(SSR)

Next.js는 초기 페이지 로드 중 서버에서 클라이언트 컴포넌트와 서버 컴포넌트를 모두 자동으로 렌더링합니다.

Convex 데이터베이스의 변경사항에 대해 UI를
[자동으로 반응](/functions/query-functions.mdx#caching--reactivity--consistency)하도록 유지하려면 클라이언트 컴포넌트를 사용해야 합니다. `ConvexReactClient`는 배포에 대한 연결을 유지하며 데이터가 변경됨에 따라 업데이트를 받게 되며 이는 클라이언트에서 발생해야 합니다.

클라이언트 컴포넌트용 데이터 미리 로드, 서버 컴포넌트에서 데이터 가져오기 및 인증, Route Handler 구현에 대한 자세한 내용은 전용
[서버 렌더링](/client/nextjs/app-router/server-rendering.mdx) 페이지를 참조하세요.

## 인증 추가하기

### 클라이언트 측만

Next.js 앱에 사용자 인증을 추가하는 가장 간단한 방법은 `app/ConvexClientProvider.tsx` 파일 내에서 [Clerk](/auth/clerk.mdx) 또는
[Auth0](/auth/auth0.mdx)에 대한 React 기반 인증 가이드를 따르는 것입니다. 예를 들어 Auth0의 경우 파일은 다음과 같습니다:

<TSAndJSSnippet
  title="app/ConvexClientProvider.tsx"
  sourceTS={Config}
  sourceJS={Config}
/>

커스텀 로딩 및 로그아웃 뷰는 `convex/react`의 헬퍼 컴포넌트인
`Authenticated`, `Unauthenticated` 및 `AuthLoading`으로 빌드할 수 있습니다. 예제는
[Convex Next.js 데모](https://github.com/get-convex/convex-demos/tree/main/nextjs-pages-router/pages/_app.tsx)를 참조하세요.

앱의 일부 라우트만 로그인이 필요한 경우, `app/ConvexClientProvider.tsx`에서 모든 페이지 간에 공유하는 대신 로그인이 필요한 페이지 컴포넌트에서 직접 동일한 헬퍼를 사용할 수 있습니다. 클라이언트 측 페이지 탐색 시 Convex에 다시 연결할 필요가 없도록 페이지 간에 단일
[ConvexReactClient](/api/classes/react.ConvexReactClient) 인스턴스를 공유하세요.

### 서버 및 클라이언트 측

서버 컴포넌트, 서버 액션 또는 Route Handler에서 사용자 정보에 액세스하거나 `ctx.auth`가 필요한 Convex 데이터를 로드하려면 Clerk 및 Auth0에서 제공하는 Next.js 전용 SDK를 사용해야 합니다.

이러한 하이브리드 SDK에는 추가 `.env.local` 구성이 필요합니다.

#### Clerk

Convex와 Next.js 15를 사용하는 예제는 다음을 실행하세요

<p>
  <b>
    <CodeWithCopyButton text="npm create convex@latest -- -t nextjs-clerk" />
  </b>
</p>

또는 Clerk의 가이드인
[Clerk Next.js 빠른 시작](https://clerk.com/docs/quickstarts/nextjs)을 따르세요. 이 가이드에는 .env.local 파일에 `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` 및 `CLERK_SECRET_KEY`를 추가하는 단계가 포함되어 있습니다. Next.js 15에서는 `@clerk/nextjs` v6 패키지에서 가져온 `<ClerkProvider>` 컴포넌트가 클라이언트 및 서버 컨텍스트 공급자로 모두 작동하므로 `@clerk/clerk-react`의 `ClerkProvider`가 필요하지 않을 것입니다.

#### Auth0

[Auth0 Next.js](https://auth0.com/docs/quickstart/webapp/nextjs/01-login) 가이드를 참조하세요.

#### 기타 공급자

Convex는 라이브 쿼리 구독과 뮤테이션 및 액션 실행을 위해 클라이언트에서 JWT ID 토큰을 사용하고, 서버 컴포넌트 및 API 라우트에서 쿼리, 뮤테이션 및 액션을 실행하기 위해 Next.js 백엔드에서 사용합니다.

두 위치에서 적절한 OpenID Identity JWT를 획득하면 모든 인증 공급자를 사용할 수 있어야 합니다. 자세한 내용은
[커스텀 인증](https://docs.convex.dev/auth/advanced/custom-auth)을 참조하세요.
