---
title: "환경 변수"
sidebar_label: "환경 변수"
sidebar_position: 2
description: "Convex에서 환경 변수 저장 및 액세스"
---

환경 변수는 API 키와 같이 코드나 테이블에 넣고 싶지 않은 값을 저장하는 데 유용한 키-값 쌍입니다. 대시보드를 통해 Convex에서 환경 변수를 설정할 수 있으며, `process.env`를 사용하여 [함수](/functions.mdx)에서 액세스할 수 있습니다.

## 환경 변수 설정하기

대시보드의 [배포 설정](/dashboard/deployments/settings.md)에서 현재 배포의 환경 변수 목록을 볼 수 있습니다.
![환경 변수 테이블](/screenshots/environment_variables_table.png)

최대 100개의 환경 변수를 추가할 수 있습니다. 환경 변수 이름은 40자를 초과할 수 없으며, 문자로 시작해야 하고 문자, 숫자, 밑줄만 포함할 수 있습니다. 환경 변수 값은 8KB보다 클 수 없습니다.

연필 아이콘 버튼을 사용하여 환경 변수를 수정할 수 있습니다:

![환경 변수 편집](/screenshots/edit_environment_variable.png)

환경 변수는 [명령줄](/cli.md#read-and-write-environment-variables)을 통해서도 조회 및 수정할 수 있습니다.

```sh
npx convex env list
npx convex env set API_KEY secret-api-key
```

### dev 및 prod 배포에서 환경 변수 사용하기

환경 변수는 배포별로 설정되므로, dev 및 prod 배포에서 동일한 키에 대해 다른 값을 사용할 수 있습니다. 이는 환경에 따라 사용하려는 외부 계정이 다를 때 유용할 수 있습니다. 예를 들어, 이메일 발송을 위한 dev 및 prod SendGrid 계정이 있고, 함수가 두 환경 모두에서 작동해야 하는 `SENDGRID_API_KEY`라는 환경 변수를 기대하는 경우입니다.

함수에서 환경 변수가 항상 존재하기를 기대한다면, **모든** 배포에 추가해야 합니다. 이 예제에서는 dev 및 prod 배포 모두에 `SENDGRID_API_KEY`라는 이름의 환경 변수를 추가하되, dev와 prod에 대해 다른 값을 사용합니다.

## 환경 변수 액세스하기

Convex 함수에서 `process.env.KEY`를 사용하여 환경 변수에 액세스할 수 있습니다. 변수가 설정되어 있으면 `string`이고, 그렇지 않으면 `undefined`입니다. 다음은 `GIPHY_KEY` 키로 환경 변수에 액세스하는 예제입니다:

```javascript
function giphyUrl(query) {
  return (
    "https://api.giphy.com/v1/gifs/translate?api_key=" +
    process.env.GIPHY_KEY +
    "&s=" +
    encodeURIComponent(query)
  );
}
```

환경 변수에 따라 Convex 함수 export를 조건부로 하지 않아야 합니다. 호출할 수 있는 Convex 함수 집합은 배포 중에 결정되며, 환경 변수를 변경할 때 재평가되지 않습니다. 다음 코드는 DEBUG 환경 변수가 배포와 함수 호출 사이에 변경되면 런타임에 오류를 발생시킵니다.

```javascript
// 이것은 작동하지 않습니다!
export const myFunc = process.env.DEBUG ? mutation(...) : internalMutation(...);
```

마찬가지로, cron 정의에 사용된 환경 변수는 배포 시에만 재평가됩니다.

## 시스템 환경 변수

다음 환경 변수는 Convex 함수에서 항상 사용할 수 있습니다:

- `CONVEX_CLOUD_URL` - Convex 클라이언트에서 사용할 배포 URL(예: `https://dusty-nightingale-847.convex.cloud`)
- `CONVEX_SITE_URL` - [HTTP Actions](/functions/http-actions.mdx)에서 사용할 배포 사이트 URL(예: `https://dusty-nightingale-847.convex.site`)

## 프로젝트 환경 변수 기본값

프로젝트 설정에서 개발 및 미리보기 배포를 위한 프로젝트 기본 환경 변수 값을 설정할 수 있습니다.

![프로젝트 기본 환경 변수](/screenshots/project_default_environment_variables.png)

이러한 기본값은 새 개발 또는 미리보기 배포를 생성할 때 사용되며, 기존 배포에는 영향을 주지 않습니다(동기화되지 않음).

배포 설정은 배포에 프로젝트 기본값과 일치하지 않는 환경 변수가 있을 때 이를 표시합니다.
![환경 변수 기본값 불일치](/screenshots/environment_variable_default_diff.png)
